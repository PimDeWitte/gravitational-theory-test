# Gravity Compression Visualization System Documentation

## Overview

The visualization system is an interactive, browser-based 3D simulator for exploring gravitational theories in the context of the Compression Hypothesis. It uses Three.js for rendering and provides real-time simulation of particle trajectories around a central massive object (black hole).

Key goals:
- Visualize how different metric tensors affect orbital dynamics
- Demonstrate the compression hypothesis through interactive parameter tuning
- Provide educational insights into relativistic effects

The system is implemented in `viz/visualization_enhanced.js` and can be embedded in HTML files generated by the simulation pipeline.

## Features

### Core Components
1. **Central Black Hole**: Rendered as a black sphere at the origin
2. **Event Horizon**: Semi-transparent red sphere at r = rs
3. **Spacetime Grid**: Horizontal grid with vertical reference planes (XY, YZ) for 3D orientation
4. **Axis Helpers**: RGB axes (Red=X, Green=Y, Blue=Z) for spatial reference

### Particles
- Up to 20 named particles with Greek letter symbols (α, β, γ, etc.)
- Each has a unique color, name, and scientific description
- Loaded from `data/particle_names.json`
- Larger size for easy interaction
- 3D trails showing trajectory history (up to 1000 points)

### Interactive Elements
- **Orbit Controls**: Mouse-drag to rotate/zoom the camera
- **Particle Selection**: Click particles to select and view details
- **Hover Effects**: Particles enlarge on hover; metric components highlight
- **Labels**: Toggleable text labels for objects and particles

### Metric Tensor Panel
- Displays when a particle is selected
- Shows real-time g_μν components at the particle's position
- Matrix layout with hover explanations for each component:
  - g_tt: Time dilation
  - g_rr: Radial distortion
  - g_φφ: Angular scaling
  - g_tφ: Frame-dragging/cross-terms
- Persists during simulation with live updates

### Simulation Features
- Real-time particle motion in full 3D space
- Relativistic orbital dynamics with metric corrections
- Quantum noise effects (random perturbations)
- Frame-dragging for rotating metrics

## Controls

The system uses dat.GUI for interactive controls:

### Simulation Folder
- **Running**: Toggle simulation on/off
- **Speed**: Adjust simulation speed (0.1x to 5x)
- **Quantum Noise**: Add random perturbations (0 to 0.1)
- **Reset**: Restart all particles to initial positions
- **Add 10k Steps**: Extend maximum simulation steps

### Display Folder
- **Show Trails**: Toggle particle trail visibility
- **Show Labels**: Toggle object and particle labels
- **Particles**: Set number of active particles (1-20)

### Theory Parameters Folder
- Dynamic sliders for metric parameters (e.g., gamma, alpha, spin)
- Initial parameters passed via constructor

## Physics Implementation

### Coordinate System
- Spherical coordinates with full 3D support
- Metric assumed spherically symmetric but supports off-diagonal terms

### Initial Conditions
- Particles start at r = 10 rs to 50 rs
- Varied azimuthal angles and inclinations (-0.2 to 0.2 rad)
- Velocity vectors for different orbit types:
  - Equatorial circular
  - Inclined prograde
  - Retrograde
  - Highly inclined elliptical
- Small random perturbations for variety

### Integration Method
- Euler integration with small timestep (dt = 0.001 * speed)
- Effective potential for radial motion:
  ```
  V_eff = -GM/r + L²/2mr² - 3GML²/mc²r³
  ```
- Angular momentum conservation (vector)
- Lense-Thirring precession for g_tφ ≠ 0
- Relativistic factor from |g_tt|^{1/2}

### Quantum Noise
- Added to radial acceleration in all directions
- Perturbs angular momentum vector

### Event Horizon Capture
- Particles deactivate when r ≤ 1.01 rs
- Hidden from view but trails remain

## Usage

### Embedding in HTML
```html
<script>
    const metricFunction = (r, params) => {
        // Your metric implementation
        return [g_tt, g_rr, g_pp, g_tp];
    };
    
    const initialParams = { gamma: 1.0 };
    new GravityVisualizerEnhanced('viz', metricFunction, initialParams);
</script>
```

### Metric Function
- Takes radial distance `r` and `params` object
- Returns array: [g_tt, g_rr, g_pp, g_tp]
- Assume scalar r for simplicity (per-particle)

## Customization

### Adding New Particles
Edit `data/particle_names.json`:
```json
{
    "particles": [
        {
            "name": "Alpha",
            "color": "#ff6b6b",
            "description": "Perihelion test particle",
            "symbol": "α"
        }
        // ...
    ]
}
```

### Extending Physics
- Modify `step()` for custom forces
- Add new parameters to `initialParams`

## Testing

Run test scripts:
- `python3 viz/test_enhanced_viz.py`: Basic features
- `python3 viz/test_3d_motion.py`: 3D orbits with Kerr metric

These start a local server and open the browser automatically.

## Limitations

- Simplified integration (not full geodesic solver)
- Assumes spherical symmetry (no full Kerr metric θ dependence)
- Browser performance limits (max ~20 particles, 100k steps)
- No collision detection
- Metric function assumes scalar r (not vectorized)

For production use, consider GPU acceleration or more precise integrators.

## Version History

- v1.0: Basic 2D visualization
- v2.0: Named particles and metric panel
- v3.0: Full 3D motion with relativistic effects

Report issues or suggestions in the project repository. 